(this["webpackJsonpvoxel-edit"]=this["webpackJsonpvoxel-edit"]||[]).push([[0],{100:function(e,t,i){},105:function(e,t,i){},108:function(e,t,i){"use strict";i.r(t);i(94);var n=i(5),a=i.n(n),o=i(50),r=i.n(o),A=(i(99),i(0)),c=i(3),s=i(1),l=i(2),u=(i(100),i(8)),v=function(e){Object(s.a)(i,e);var t=Object(l.a)(i);function i(e){var n;return Object(A.a)(this,i),(n=t.call(this,e)).canvasRef=a.a.createRef(),n}return Object(c.a)(i,[{key:"componentDidMount",value:function(){this.props.onCanvasCreation(this.canvasRef)}},{key:"render",value:function(){return Object(u.jsx)("canvas",{className:"viewportCanvas",ref:this.canvasRef})}}]),i}(a.a.Component),h=i(119),d=function(e){Object(s.a)(i,e);var t=Object(l.a)(i);function i(e){var n;return Object(A.a)(this,i),(n=t.call(this,e)).handleBrushClick=function(e,t){var i=t.name;n.setState({activeBrush:i}),n.props.onBrushChange(i)},n.state={activeBrush:"add"},n}return Object(c.a)(i,[{key:"componentDidMount",value:function(){this.props.onBrushChange(this.state.activeBrush)}},{key:"render",value:function(){var e=this.state.activeBrush;return Object(u.jsxs)(a.a.Fragment,{children:[Object(u.jsx)(h.a.Item,{name:"add",active:"add"===e,onClick:this.handleBrushClick,children:"Add"}),Object(u.jsx)(h.a.Item,{name:"remove",active:"remove"===e,onClick:this.handleBrushClick,children:"Remove"}),Object(u.jsx)(h.a.Item,{name:"paint",active:"paint"===e,onClick:this.handleBrushClick,children:"Paint"})]})}}]),i}(a.a.Component),b=(i(105),i(120)),g=i(121),p=i(122),j=function(e){Object(s.a)(i,e);var t=Object(l.a)(i);function i(e){var n;return Object(A.a)(this,i),(n=t.call(this,e)).updateMobileState=function(){var e=window.innerWidth<768;n.setState({isMobile:e})},n.state={isMobile:!1},n}return Object(c.a)(i,[{key:"componentDidMount",value:function(){this.updateMobileState(),window.addEventListener("resize",this.updateMobileState)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateMobileState)}},{key:"createDesktopViewport",value:function(){return Object(u.jsxs)(b.a.Pushable,{as:g.a,children:[Object(u.jsxs)(b.a,{as:h.a,inverted:!0,direction:"top",visible:!0,width:"very thin",children:[Object(u.jsx)(h.a.Item,{as:"a",children:"Undo"}),Object(u.jsx)(h.a.Item,{as:"a",children:"Redo"})]}),Object(u.jsx)(v,{onCanvasCreation:this.props.onCanvasCreation})]})}},{key:"createDesktopGUI",value:function(){return Object(u.jsx)(p.a,{celled:!0,className:"desktopGrid",children:Object(u.jsxs)(p.a.Row,{children:[Object(u.jsx)(p.a.Column,{width:3,children:Object(u.jsx)(h.a,{vertical:!0,fluid:!0,inverted:!0,children:Object(u.jsx)(d,{onBrushChange:this.props.onBrushChange})})}),Object(u.jsx)(p.a.Column,{width:11,style:{padding:"0"},children:this.createDesktopViewport()}),Object(u.jsx)(p.a.Column,{width:2,children:Object(u.jsx)("h1",{children:"Right Panel"})})]})})}},{key:"createMobileGUI",value:function(){return Object(u.jsx)("div",{style:{height:window.innerHeight},children:Object(u.jsxs)(b.a.Pushable,{as:g.a,style:{border:"none",borderRadius:"0"},children:[Object(u.jsxs)(b.a,{as:h.a,inverted:!0,direction:"top",visible:!0,width:"very thin",children:[Object(u.jsx)(h.a.Item,{as:"a",children:"Color Palette"}),Object(u.jsx)(h.a.Item,{as:"a",children:"Edit"}),Object(u.jsx)(h.a.Item,{as:"a",children:"Camera"}),Object(u.jsx)(h.a.Item,{as:"a",children:"Project"})]}),Object(u.jsx)(b.a,{as:h.a,inverted:!0,direction:"bottom",visible:!0,width:"thin",children:Object(u.jsx)(d,{onBrushChange:this.props.onBrushChange})}),Object(u.jsx)(v,{onCanvasCreation:this.props.onCanvasCreation})]})})}},{key:"render",value:function(){return this.state.isMobile?this.createMobileGUI():this.createDesktopGUI()}}]),i}(a.a.Component),B=i(68),w=i(47),f=i(6),m=i(82),C=function(){function e(t){Object(A.a)(this,e),this.cellSize=t.cellSize,this.tileSize=t.tileSize,this.tileTextureWidth=t.tileTextureWidth,this.tileTextureHeight=t.tileTextureHeight;var i=this.cellSize;this.cellSliceSize=i*i,this.cells={}}return Object(c.a)(e,[{key:"computeVoxelOffset",value:function(e,t,i){var n=this.cellSize,a=this.cellSliceSize,o=0|f.h.euclideanModulo(e,n);return(0|f.h.euclideanModulo(t,n))*a+(0|f.h.euclideanModulo(i,n))*n+o}},{key:"computeCellId",value:function(e,t,i){var n=this.cellSize,a=Math.floor(e/n),o=Math.floor(t/n),r=Math.floor(i/n);return"".concat(a,",").concat(o,",").concat(r)}},{key:"addCellForVoxel",value:function(e,t,i){var n=this.computeCellId(e,t,i),a=this.cells[n];if(!a){var o=this.cellSize;a=new Uint8Array(o*o*o),this.cells[n]=a}return a}},{key:"getCellForVoxel",value:function(e,t,i){return this.cells[this.computeCellId(e,t,i)]}},{key:"setVoxel",value:function(e,t,i,n){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=this.getCellForVoxel(e,t,i);if(!o){if(!a)return;o=this.addCellForVoxel(e,t,i)}var r=this.computeVoxelOffset(e,t,i);o[r]=n}},{key:"getVoxel",value:function(e,t,i){var n=this.getCellForVoxel(e,t,i);return n?n[this.computeVoxelOffset(e,t,i)]:0}},{key:"generateGeometryDataForCell",value:function(t,i,n){for(var a=this.cellSize,o=this.tileSize,r=this.tileTextureWidth,A=this.tileTextureHeight,c=[],s=[],l=[],u=[],v=t*a,h=i*a,d=n*a,b=0;b<a;++b)for(var g=h+b,p=0;p<a;++p)for(var j=d+p,f=0;f<a;++f){var m=v+f,C=this.getVoxel(m,g,j);if(C){var I,D=C-1,M=Object(w.a)(e.faces);try{for(M.s();!(I=M.n()).done;){var Q=I.value,x=Q.dir,O=Q.corners,y=Q.uvRow;if(!this.getVoxel(m+x[0],g+x[1],j+x[2])){var P,z=c.length/3,E=Object(w.a)(O);try{for(E.s();!(P=E.n()).done;){var L=P.value,S=L.pos,k=L.uv;c.push(S[0]+f,S[1]+b,S[2]+p),s.push.apply(s,Object(B.a)(x)),l.push((D+k[0])*o/r,1-(y+1-k[1])*o/A)}}catch(W){E.e(W)}finally{E.f()}u.push(z,z+1,z+2,z+2,z+1,z+3)}}}catch(W){M.e(W)}finally{M.f()}}}return{positions:c,normals:s,uvs:l,indices:u}}},{key:"intersectRay",value:function(e,t){var i=t.x-e.x,n=t.y-e.y,a=t.z-e.z,o=i*i+n*n+a*a,r=Math.sqrt(o);i/=r,n/=r,a/=r;for(var A=0,c=Math.floor(e.x),s=Math.floor(e.y),l=Math.floor(e.z),u=i>0?1:-1,v=n>0?1:-1,h=a>0?1:-1,d=Math.abs(1/i),b=Math.abs(1/n),g=Math.abs(1/a),p=u>0?c+1-e.x:e.x-c,j=v>0?s+1-e.y:e.y-s,B=h>0?l+1-e.z:e.z-l,w=d<1/0?d*p:1/0,f=b<1/0?b*j:1/0,m=g<1/0?g*B:1/0,C=-1;A<=r;){var I=this.getVoxel(c,s,l);if(I)return{position:[e.x+A*i,e.y+A*n,e.z+A*a],normal:[0===C?-u:0,1===C?-v:0,2===C?-h:0],voxel:I};w<f?w<m?(c+=u,A=w,w+=d,C=0):(l+=h,A=m,m+=g,C=2):f<m?(s+=v,A=f,f+=b,C=1):(l+=h,A=m,m+=g,C=2)}return null}}]),e}();C.faces=[{uvRow:0,dir:[-1,0,0],corners:[{pos:[0,1,0],uv:[0,1]},{pos:[0,0,0],uv:[0,0]},{pos:[0,1,1],uv:[1,1]},{pos:[0,0,1],uv:[1,0]}]},{uvRow:0,dir:[1,0,0],corners:[{pos:[1,1,1],uv:[0,1]},{pos:[1,0,1],uv:[0,0]},{pos:[1,1,0],uv:[1,1]},{pos:[1,0,0],uv:[1,0]}]},{uvRow:1,dir:[0,-1,0],corners:[{pos:[1,0,1],uv:[1,0]},{pos:[0,0,1],uv:[0,0]},{pos:[1,0,0],uv:[1,1]},{pos:[0,0,0],uv:[0,1]}]},{uvRow:2,dir:[0,1,0],corners:[{pos:[0,1,1],uv:[1,1]},{pos:[1,1,1],uv:[0,1]},{pos:[0,1,0],uv:[1,0]},{pos:[1,1,0],uv:[0,0]}]},{uvRow:0,dir:[0,0,-1],corners:[{pos:[1,0,0],uv:[0,0]},{pos:[0,0,0],uv:[1,0]},{pos:[1,1,0],uv:[0,1]},{pos:[0,1,0],uv:[1,1]}]},{uvRow:0,dir:[0,0,1],corners:[{pos:[0,0,1],uv:[0,0]},{pos:[1,0,1],uv:[1,0]},{pos:[0,1,1],uv:[0,1]},{pos:[1,1,1],uv:[1,1]}]}];var I={add:"add",remove:"remove",paint:"paint"},D=I.add;function M(e){var t=I[e];t&&(D=t)}function Q(e){var t=new f.t({canvas:e}),i=32,n=new f.l(75,2,.1,1e3);n.position.set(-9.6,25.6,-9.6);var a=new m.a(n,e);a.target.set(16,i/3,16),a.update();var o=new f.n;o.background=new f.c("lightblue");var r=(new f.q).load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAABACAYAAAD1Xam+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGAGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTktMDYtMTlUMTU6NDc6MDgrMDk6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTktMDYtMTlUMTU6NDc6MDgrMDk6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE5LTA2LTE5VDE1OjQ3OjA4KzA5OjAwIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI2ZTk2MTM4LTNjMDctNDg1NS1iMzJkLWNiODEzYWY0OWEwMCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmI3NjBlMzNkLWM1MDMtMjg0MC1iMDM2LWM5NzNjOTlhMmZmMSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjg1MWQ5N2FkLTRhOTctNDkyZS05YzcxLWFmYWRkNGY4MmMyMyIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ODUxZDk3YWQtNGE5Ny00OTJlLTljNzEtYWZhZGQ0ZjgyYzIzIiBzdEV2dDp3aGVuPSIyMDE5LTA2LTE5VDE1OjQ3OjA4KzA5OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MjZlOTYxMzgtM2MwNy00ODU1LWIzMmQtY2I4MTNhZjQ5YTAwIiBzdEV2dDp3aGVuPSIyMDE5LTA2LTE5VDE1OjQ3OjA4KzA5OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6yxlNQAAAMxklEQVR42u1dLa9cVRSdn8APqKhAVDzxRAWipqICgUBUICqeQDQBgXiiAvMUH0lFDUmDIAjEEw2pQDQBA0kFIQhERQUCUYFAVg6zb2ZN1tvd+3zfuTPpbrIy995zzmOYuWvd/XX2rP69vLsG/j6/vX557+b0ytdTY6///Wf14uVn68fPPnwD9x/fWqfGNmvXf/1yuX75/KdmfH9xf31x9tH6zycXE54+Ol8//OzsCuQaxuVc5ss6gNdfu/Ne1fpfL+42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",p);function A(e,t,i){var n=new f.d(16777215,1);n.position.set(e,t,i),o.add(n)}r.magFilter=f.k,r.minFilter=f.k,A(-1,2,4),A(1,-1,-2);var c=new C({cellSize:i,tileSize:16,tileTextureWidth:256,tileTextureHeight:64}),s=new f.j({map:r,side:f.e,alphaTest:.1,transparent:!0}),l={};function u(e,t,n){var a=Math.floor(e/i),r=Math.floor(t/i),A=Math.floor(n/i),u=c.computeCellId(e,t,n),v=l[u],h=v?v.geometry:new f.b,d=c.generateGeometryDataForCell(a,r,A),b=d.positions,g=d.normals,p=d.uvs,j=d.indices;h.setAttribute("position",new f.a(new Float32Array(b),3));h.setAttribute("normal",new f.a(new Float32Array(g),3));h.setAttribute("uv",new f.a(new Float32Array(p),2)),h.setIndex(j),h.computeBoundingSphere(),v||((v=new f.i(h,s)).name=u,l[u]=v,o.add(v),v.position.set(a*i,r*i,A*i))}var v=[[0,0,0],[-1,0,0],[1,0,0],[0,-1,0],[0,1,0],[0,0,-1],[0,0,1]];function h(e,t,i){var n,a={},o=Object(w.a)(v);try{for(o.s();!(n=o.n()).done;){var r=n.value,A=e+r[0],s=t+r[1],l=i+r[2],h=c.computeCellId(A,s,l);a[h]||(a[h]=!0,u(A,s,l))}}catch(d){o.e(d)}finally{o.f()}}function d(e,t,n){for(var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=e*i,r=t*i,A=n*i,s=0;s<i;++s)for(var l=0;l<i;++l)for(var u=0;u<i;++u){var v=(Math.sin(u/i*Math.PI*2)+Math.sin(l/i*Math.PI*3))*(i/6)+16;s<v&&c.setVoxel(o+u,r+s,A+l,a||b(1,17))}}function b(e,t){return Math.floor(Math.random()*(t-e)+e)}d(0,0,0),d(1,0,0,2),d(-1,0,0,3),d(0,0,-1,4),d(0,0,1,5),h(0,0,0),h(31,0,31);var g=!1;function p(){g=void 0,function(e){var t=e.domElement,i=t.clientWidth,n=t.clientHeight,a=t.width!==i||t.height!==n;return a&&e.setSize(i,n,!1),a}(t)&&(n.aspect=e.clientWidth/e.clientHeight,n.updateProjectionMatrix()),a.update(),t.render(o,n)}function j(){g||(g=!0,requestAnimationFrame(p))}p();function M(t,i){var a=function(t){var i=e.getBoundingClientRect();return{x:(t.clientX-i.left)*e.width/i.width,y:(t.clientY-i.top)*e.height/i.height}}(t),o=a.x/e.width*2-1,r=a.y/e.height*-2+1,A=new f.s,s=new f.s;A.setFromMatrixPosition(n.matrixWorld),s.set(o,r,1).unproject(n);var l=c.intersectRay(A,s);if(l){var u=i===I.remove?0:1,v=l.position.map((function(e,t){return e+l.normal[t]*(i===I.add?.5:-.5)}));c.setVoxel.apply(c,Object(B.a)(v).concat([u])),h.apply(void 0,Object(B.a)(v)),j()}}var Q={x:0,y:0};function x(e){Q.moveX+=Math.abs(Q.x-e.clientX),Q.moveY+=Math.abs(Q.y-e.clientY)}function O(e){Q.moveX<5&&Q.moveY<5&&M(e,D),window.removeEventListener("pointermove",x),window.removeEventListener("pointerup",O)}e.addEventListener("pointerdown",(function(e){e.preventDefault(),function(e){Q.x=e.clientX,Q.y=e.clientY,Q.moveX=0,Q.moveY=0}(e),window.addEventListener("pointermove",x),window.addEventListener("pointerup",O)}),{passive:!1}),e.addEventListener("touchstart",(function(e){e.preventDefault()}),{passive:!1}),a.addEventListener("change",j),window.addEventListener("resize",j)}var x=function(e){Object(s.a)(i,e);var t=Object(l.a)(i);function i(){return Object(A.a)(this,i),t.apply(this,arguments)}return Object(c.a)(i,[{key:"createVoxelWorld",value:function(e){e&&Q(e.current)}},{key:"render",value:function(){return Object(u.jsx)(j,{onCanvasCreation:this.createVoxelWorld,onBrushChange:M})}}]),i}(a.a.Component),O=function(){return Object(u.jsx)(x,{})};r.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(O,{})}),document.getElementById("root"))},99:function(e,t,i){}},[[108,1,2]]]);
//# sourceMappingURL=main.bda772f8.chunk.js.map