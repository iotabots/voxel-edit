(this["webpackJsonpvoxel-edit"]=this["webpackJsonpvoxel-edit"]||[]).push([[0],{100:function(e,t,i){},105:function(e,t,i){},108:function(e,t,i){"use strict";i.r(t);i(94);var n=i(5),r=i.n(n),o=i(50),a=i.n(o),s=(i(99),i(0)),c=i(1),l=i(2),A=i(3),h=(i(100),i(8)),u=function(e){Object(l.a)(i,e);var t=Object(A.a)(i);function i(e){var n;return Object(s.a)(this,i),(n=t.call(this,e)).canvasRef=r.a.createRef(),n}return Object(c.a)(i,[{key:"componentDidMount",value:function(){this.props.onCanvasCreation(this.canvasRef)}},{key:"render",value:function(){return Object(h.jsx)("canvas",{className:"viewportCanvas",ref:this.canvasRef})}}]),i}(r.a.Component),v=i(119),d=function(e){Object(l.a)(i,e);var t=Object(A.a)(i);function i(e){var n;return Object(s.a)(this,i),(n=t.call(this,e)).handleBrushClick=function(e,t){var i=t.name;n.setState({activeBrush:i}),n.props.onBrushChange(i)},n.state={activeBrush:"add"},n}return Object(c.a)(i,[{key:"componentDidMount",value:function(){this.props.onBrushChange(this.state.activeBrush)}},{key:"render",value:function(){var e=this.state.activeBrush;return Object(h.jsxs)(r.a.Fragment,{children:[Object(h.jsx)(v.a.Item,{name:"add",active:"add"===e,onClick:this.handleBrushClick,children:"Add"}),Object(h.jsx)(v.a.Item,{name:"remove",active:"remove"===e,onClick:this.handleBrushClick,children:"Remove"}),Object(h.jsx)(v.a.Item,{name:"paint",active:"paint"===e,onClick:this.handleBrushClick,children:"Paint"})]})}}]),i}(r.a.Component),b=(i(105),i(120)),g=i(121),m=i(122),p=function(e){Object(l.a)(i,e);var t=Object(A.a)(i);function i(e){var n;return Object(s.a)(this,i),(n=t.call(this,e)).updateMobileState=function(){var e=window.innerWidth<768;n.setState({isMobile:e})},n.state={isMobile:!1},n}return Object(c.a)(i,[{key:"componentDidMount",value:function(){this.updateMobileState(),window.addEventListener("resize",this.updateMobileState)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateMobileState)}},{key:"createDesktopViewport",value:function(){return Object(h.jsxs)(b.a.Pushable,{as:g.a,children:[Object(h.jsxs)(b.a,{as:v.a,inverted:!0,direction:"top",visible:!0,width:"very thin",children:[Object(h.jsx)(v.a.Item,{as:"a",children:"Undo"}),Object(h.jsx)(v.a.Item,{as:"a",children:"Redo"})]}),Object(h.jsx)(u,{onCanvasCreation:this.props.onCanvasCreation})]})}},{key:"createDesktopGUI",value:function(){return Object(h.jsx)(m.a,{celled:!0,className:"desktopGrid",children:Object(h.jsxs)(m.a.Row,{children:[Object(h.jsx)(m.a.Column,{width:3,children:Object(h.jsx)(v.a,{vertical:!0,fluid:!0,inverted:!0,children:Object(h.jsx)(d,{onBrushChange:this.props.onBrushChange})})}),Object(h.jsx)(m.a.Column,{width:11,style:{padding:"0"},children:this.createDesktopViewport()}),Object(h.jsx)(m.a.Column,{width:2,children:Object(h.jsx)("h1",{children:"Right Panel"})})]})})}},{key:"createMobileGUI",value:function(){return Object(h.jsx)("div",{style:{height:window.innerHeight},children:Object(h.jsxs)(b.a.Pushable,{as:g.a,style:{border:"none",borderRadius:"0"},children:[Object(h.jsxs)(b.a,{as:v.a,inverted:!0,direction:"top",visible:!0,width:"very thin",children:[Object(h.jsx)(v.a.Item,{as:"a",children:"Color Palette"}),Object(h.jsx)(v.a.Item,{as:"a",children:"Edit"}),Object(h.jsx)(v.a.Item,{as:"a",children:"Camera"}),Object(h.jsx)(v.a.Item,{as:"a",children:"Project"})]}),Object(h.jsx)(b.a,{as:v.a,inverted:!0,direction:"bottom",visible:!0,width:"thin",children:Object(h.jsx)(d,{onBrushChange:this.props.onBrushChange})}),Object(h.jsx)(u,{onCanvasCreation:this.props.onCanvasCreation})]})})}},{key:"render",value:function(){return this.state.isMobile?this.createMobileGUI():this.createDesktopGUI()}}]),i}(r.a.Component),f=i(54),C=i(6),B=i(82),j=i(47),w=function(){function e(t){Object(s.a)(this,e),this.cellSize=t.cellSize,this.tileSize=t.tileSize,this.tileTextureWidth=t.tileTextureWidth,this.tileTextureHeight=t.tileTextureHeight,this.material=t.material,this.cellSliceSize=this.cellSize*this.cellSize,this.cells={},this.cellIdToMesh={},this.neighborOffsets=[[0,0,0],[-1,0,0],[1,0,0],[0,-1,0],[0,1,0],[0,0,-1],[0,0,1]]}return Object(c.a)(e,[{key:"computeVoxelOffset",value:function(e,t,i){var n=this.cellSize,r=this.cellSliceSize,o=0|C.h.euclideanModulo(e,n);return(0|C.h.euclideanModulo(t,n))*r+(0|C.h.euclideanModulo(i,n))*n+o}},{key:"computeCellId",value:function(e,t,i){var n=this.cellSize,r=Math.floor(e/n),o=Math.floor(t/n),a=Math.floor(i/n);return"".concat(r,",").concat(o,",").concat(a)}},{key:"addCellForVoxel",value:function(e,t,i){var n=this.computeCellId(e,t,i),r=this.cells[n];if(!r){var o=this.cellSize;r=new Uint8Array(o*o*o),this.cells[n]=r}return r}},{key:"getCellForVoxel",value:function(e,t,i){return this.cells[this.computeCellId(e,t,i)]}},{key:"setVoxel",value:function(e,t,i,n){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=this.getCellForVoxel(e,t,i);if(!o){if(!r)return;o=this.addCellForVoxel(e,t,i)}var a=this.computeVoxelOffset(e,t,i);o[a]=n}},{key:"getVoxel",value:function(e,t,i){var n=this.getCellForVoxel(e,t,i);return n?n[this.computeVoxelOffset(e,t,i)]:0}},{key:"generateGeometryDataForCell",value:function(t,i,n){for(var r=this.cellSize,o=this.tileSize,a=this.tileTextureWidth,s=this.tileTextureHeight,c=[],l=[],A=[],h=[],u=t*r,v=i*r,d=n*r,b=0;b<r;++b)for(var g=v+b,m=0;m<r;++m)for(var p=d+m,C=0;C<r;++C){var B=u+C,w=this.getVoxel(B,g,p);if(w){var I,x=w-1,D=Object(j.a)(e.faces);try{for(D.s();!(I=D.n()).done;){var M=I.value,Q=M.dir,y=M.corners,O=M.uvRow;if(!this.getVoxel(B+Q[0],g+Q[1],p+Q[2])){var z,S=c.length/3,P=Object(j.a)(y);try{for(P.s();!(z=P.n()).done;){var E=z.value,L=E.pos,k=E.uv;c.push(L[0]+C,L[1]+b,L[2]+m),l.push.apply(l,Object(f.a)(Q)),A.push((x+k[0])*o/a,1-(O+1-k[1])*o/s)}}catch(N){P.e(N)}finally{P.f()}h.push(S,S+1,S+2,S+2,S+1,S+3)}}}catch(N){D.e(N)}finally{D.f()}}}return{positions:c,normals:l,uvs:A,indices:h}}},{key:"intersectRay",value:function(e,t){var i=t.x-e.x,n=t.y-e.y,r=t.z-e.z,o=i*i+n*n+r*r,a=Math.sqrt(o);i/=a,n/=a,r/=a;for(var s=0,c=Math.floor(e.x),l=Math.floor(e.y),A=Math.floor(e.z),h=i>0?1:-1,u=n>0?1:-1,v=r>0?1:-1,d=Math.abs(1/i),b=Math.abs(1/n),g=Math.abs(1/r),m=h>0?c+1-e.x:e.x-c,p=u>0?l+1-e.y:e.y-l,f=v>0?A+1-e.z:e.z-A,C=d<1/0?d*m:1/0,B=b<1/0?b*p:1/0,j=g<1/0?g*f:1/0,w=-1;s<=a;){var I=this.getVoxel(c,l,A);if(I)return{position:[e.x+s*i,e.y+s*n,e.z+s*r],normal:[0===w?-h:0,1===w?-u:0,2===w?-v:0],voxel:I};C<B?C<j?(c+=h,s=C,C+=d,w=0):(A+=v,s=j,j+=g,w=2):B<j?(l+=u,s=B,B+=b,w=1):(A+=v,s=j,j+=g,w=2)}return null}},{key:"updateVoxelGeometry",value:function(e,t,i,n){var r,o={},a=Object(j.a)(this.neighborOffsets);try{for(a.s();!(r=a.n()).done;){var s=r.value,c=t+s[0],l=i+s[1],A=n+s[2],h=this.computeCellId(c,l,A);o[h]||(o[h]=!0,this.updateCellGeometry(e,c,l,A))}}catch(u){a.e(u)}finally{a.f()}}},{key:"updateCellGeometry",value:function(e,t,i,n){var r=this.cellSize,o=Math.floor(t/r),a=Math.floor(i/r),s=Math.floor(n/r),c=this.computeCellId(t,i,n),l=this.cellIdToMesh[c],A=l?l.geometry:new C.b,h=this.generateGeometryDataForCell(o,a,s),u=h.positions,v=h.normals,d=h.uvs,b=h.indices;A.setAttribute("position",new C.a(new Float32Array(u),3));A.setAttribute("normal",new C.a(new Float32Array(v),3));A.setAttribute("uv",new C.a(new Float32Array(d),2)),A.setIndex(b),A.computeBoundingSphere(),l||((l=new C.i(A,this.material)).name=c,this.cellIdToMesh[c]=l,e.add(l),l.position.set(o*r,a*r,s*r))}}]),e}();w.faces=[{uvRow:0,dir:[-1,0,0],corners:[{pos:[0,1,0],uv:[0,1]},{pos:[0,0,0],uv:[0,0]},{pos:[0,1,1],uv:[1,1]},{pos:[0,0,1],uv:[1,0]}]},{uvRow:0,dir:[1,0,0],corners:[{pos:[1,1,1],uv:[0,1]},{pos:[1,0,1],uv:[0,0]},{pos:[1,1,0],uv:[1,1]},{pos:[1,0,0],uv:[1,0]}]},{uvRow:1,dir:[0,-1,0],corners:[{pos:[1,0,1],uv:[1,0]},{pos:[0,0,1],uv:[0,0]},{pos:[1,0,0],uv:[1,1]},{pos:[0,0,0],uv:[0,1]}]},{uvRow:2,dir:[0,1,0],corners:[{pos:[0,1,1],uv:[1,1]},{pos:[1,1,1],uv:[0,1]},{pos:[0,1,0],uv:[1,0]},{pos:[1,1,0],uv:[0,0]}]},{uvRow:0,dir:[0,0,-1],corners:[{pos:[1,0,0],uv:[0,0]},{pos:[0,0,0],uv:[1,0]},{pos:[1,1,0],uv:[0,1]},{pos:[0,1,0],uv:[1,1]}]},{uvRow:0,dir:[0,0,1],corners:[{pos:[0,0,1],uv:[0,0]},{pos:[1,0,1],uv:[1,0]},{pos:[0,1,1],uv:[0,1]},{pos:[1,1,1],uv:[1,1]}]}];var I=w,x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add";Object(s.a)(this,e),this.setCurrentBrush(t)}return Object(c.a)(e,[{key:"setCurrentBrush",value:function(t){var i=e.brushOptions[t];i&&(this.currentBrush=i)}}]),e}();x.brushOptions={add:"add",remove:"remove",paint:"paint"};var D=x;function M(e,t){return Math.floor(Math.random()*(t-e)+e)}var Q=function(){function e(t){var i=this;Object(s.a)(this,e),this.render=function(){i.renderRequested=void 0,i.resizeRendererToDisplaySize(i.renderer)&&(i.camera.aspect=i.canvas.clientWidth/i.canvas.clientHeight,i.camera.updateProjectionMatrix()),i.controls.update(),i.renderer.render(i.scene,i.camera)},this.requestRenderIfNotRequested=function(){i.renderRequested||(i.renderRequested=!0,requestAnimationFrame(i.render))},this.recordStartPosition=function(e){var t=i.mouse;t.x=e.clientX,t.y=e.clientY,t.moveX=0,t.moveY=0},this.recordMovement=function(e){var t=i.mouse;t.moveX+=Math.abs(t.x-e.clientX),t.moveY+=Math.abs(t.y-e.clientY)},this.placeVoxelIfNoMovement=function(e){var t=i.mouse;t.moveX<5&&t.moveY<5&&i.placeVoxel(e),window.removeEventListener("pointermove",i.recordMovement),window.removeEventListener("pointerup",i.placeVoxelIfNoMovement)},this.canvas=t,this.renderer=new C.t({canvas:this.canvas}),this.cellSize=32,this.createCamera(),this.createOrbitControls(),this.scene=new C.n,this.scene.background=new C.c("#3C3C3C"),this.addLight(-1,2,4),this.addLight(1,-1,-2);var n=function(e){var t=(new C.q).load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAABACAYAAAD1Xam+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGAGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTktMDYtMTlUMTU6NDc6MDgrMDk6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTktMDYtMTlUMTU6NDc6MDgrMDk6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE5LTA2LTE5VDE1OjQ3OjA4KzA5OjAwIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI2ZTk2MTM4LTNjMDctNDg1NS1iMzJkLWNiODEzYWY0OWEwMCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmI3NjBlMzNkLWM1MDMtMjg0MC1iMDM2LWM5NzNjOTlhMmZmMSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjg1MWQ5N2FkLTRhOTctNDkyZS05YzcxLWFmYWRkNGY4MmMyMyIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ODUxZDk3YWQtNGE5Ny00OTJlLTljNzEtYWZhZGQ0ZjgyYzIzIiBzdEV2dDp3aGVuPSIyMDE5LTA2LTE5VDE1OjQ3OjA4KzA5OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MjZlOTYxMzgtM2MwNy00ODU1LWIzMmQtY2I4MTNhZjQ5YTAwIiBzdEV2dDp3aGVuPSIyMDE5LTA2LTE5VDE1OjQ3OjA4KzA5OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6yxlNQAAAMxklEQVR42u1dLa9cVRSdn8APqKhAVDzxRAWipqICgUBUICqeQDQBgXiiAvMUH0lFDUmDIAjEEw2pQDQBA0kFIQhERQUCUYFAVg6zb2ZN1tvd+3zfuTPpbrIy995zzmOYuWvd/XX2rP69vLsG/j6/vX557+b0ytdTY6///Wf14uVn68fPPnwD9x/fWqfGNmvXf/1yuX75/KdmfH9xf31x9tH6zycXE54+Ol8//OzsCuQaxuVc5ss6gNdfu/Ne1fpfL+42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",e);return t.magFilter=C.k,t.minFilter=C.k,t}(this.render),r=new C.j({map:n,side:C.e,alphaTest:.1,transparent:!0});this.world=new I({cellSize:this.cellSize,tileSize:16,tileTextureWidth:256,tileTextureHeight:64,material:r}),function(e,t,i,n,r){for(var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=t*r,s=i*r,c=n*r,l=0;l<r;++l)for(var A=0;A<r;++A)e.setVoxel(a+A,s,c+l,o||M(1,17))}(this.world,0,0,0,this.cellSize,8),this.world.updateVoxelGeometry(this.scene,0,0,0),this.renderRequested=!1,this.currentVoxel=1,this.mouse={x:0,y:0,moveX:0,moveY:0},this.canvas.addEventListener("pointerdown",(function(e){e.preventDefault(),i.recordStartPosition(e),window.addEventListener("pointermove",i.recordMovement),window.addEventListener("pointerup",i.placeVoxelIfNoMovement)}),{passive:!1}),this.canvas.addEventListener("touchstart",(function(e){e.preventDefault()}),{passive:!1}),this.controls.addEventListener("change",this.requestRenderIfNotRequested),window.addEventListener("resize",this.requestRenderIfNotRequested),this.brush=new D}return Object(c.a)(e,[{key:"createCamera",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:75,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3;this.camera=new C.l(e,t,i,n),this.camera.position.set(.2*-this.cellSize,.3*this.cellSize,.2*-this.cellSize)}},{key:"createOrbitControls",value:function(){this.controls=new B.a(this.camera,this.canvas),this.controls.target.set(this.cellSize/2,0,this.cellSize/2),this.controls.update()}},{key:"addLight",value:function(e,t,i){var n=new C.d(16777215,1);n.position.set(e,t,i),this.scene.add(n)}},{key:"resizeRendererToDisplaySize",value:function(e){var t=e.domElement,i=t.clientWidth,n=t.clientHeight,r=t.width!==i||t.height!==n;return r&&e.setSize(i,n,!1),r}},{key:"getCanvasRelativePosition",value:function(e){var t=this.canvas,i=t.getBoundingClientRect();return{x:(e.clientX-i.left)*t.width/i.width,y:(e.clientY-i.top)*t.height/i.height}}},{key:"placeVoxel",value:function(e){var t=this,i=this.getCanvasRelativePosition(e),n=i.x/this.canvas.width*2-1,r=i.y/this.canvas.height*-2+1,o=new C.s,a=new C.s;o.setFromMatrixPosition(this.camera.matrixWorld),a.set(n,r,1).unproject(this.camera);var s=this.world.intersectRay(o,a);if(s){var c,l,A=this.brush.currentBrush===D.brushOptions.remove?0:this.currentVoxel,h=s.position.map((function(e,i){return e+s.normal[i]*(t.brush.currentBrush===D.brushOptions.add?.5:-.5)}));(c=this.world).setVoxel.apply(c,Object(f.a)(h).concat([A])),(l=this.world).updateVoxelGeometry.apply(l,[this.scene].concat(Object(f.a)(h))),this.requestRenderIfNotRequested()}}}]),e}(),y=function(e){Object(l.a)(i,e);var t=Object(A.a)(i);function i(e){var n;return Object(s.a)(this,i),(n=t.call(this,e)).createVoxelWorld=function(e){e&&(n.voxelEditor=new Q(e.current))},n.setCurrentBrush=function(e){n.voxelEditor&&n.voxelEditor.brush.setCurrentBrush(e)},n.voxelEditor=null,n}return Object(c.a)(i,[{key:"render",value:function(){return Object(h.jsx)(p,{onCanvasCreation:this.createVoxelWorld,onBrushChange:this.setCurrentBrush})}}]),i}(r.a.Component),O=function(){return Object(h.jsx)(y,{})};a.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(O,{})}),document.getElementById("root"))},99:function(e,t,i){}},[[108,1,2]]]);
//# sourceMappingURL=main.112405b7.chunk.js.map